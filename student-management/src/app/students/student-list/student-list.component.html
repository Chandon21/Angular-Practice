<div class="app-container">
  <!-- Navbar -->
  <div class="navbar d-flex justify-content-between align-items-center p-3 shadow-sm mb-3">
    <div class="navbar-brand fw-bold fs-4">Student Management</div>
    <div>
      <button class="btn btn-success" (click)="onAdd()">Add Student</button>
    </div>
  </div>

  <!-- Card -->
  <div class="card p-3 shadow-sm">
    <!-- Search -->
    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
      <h3>Students</h3>
      <input
        type="text"
        class="form-control w-auto"
        placeholder="Search"
        [(ngModel)]="filter"
        (input)="applyFilter()"
      >
    </div>

    <!-- Table -->
    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Department</th>
            <th>Course</th>
            <th>Skills</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of paginatedStudents">
            <td>{{ student.id }}</td>
            <td>{{ student.name }}</td>
            <td>{{ student.email }}</td>
            <td>{{ student.department || '-' }}</td>
            <td>{{ student.course }}</td>
            <td>{{ (student.skills ?? []).join(', ') || '-' }}</td>
            <td>
              <button class="btn btn-sm btn-primary me-1" (click)="onEdit(student.id)">Edit</button>
              <button class="btn btn-sm btn-danger" (click)="onDelete(student.id)">Delete</button>
            </td>
          </tr>

          <tr *ngIf="paginatedStudents.length === 0">
            <td colspan="8" class="text-center">No students found</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div
      class="pagination-container mt-3 d-flex justify-content-center align-items-center gap-2 flex-wrap"
    >
      <button
        class="btn btn-outline-primary btn-sm"
        [disabled]="page === 1"
        (click)="changePage(page-1)"
      >
        Previous
      </button>

      <button
        class="btn btn-primary btn-sm"
        *ngFor="let p of [].constructor(totalPages); let i = index"
        [class.active]="page === i+1"
        (click)="changePage(i+1)"
      >
        {{ i + 1 }}
      </button>

      <button
        class="btn btn-outline-primary btn-sm"
        [disabled]="page === totalPages"
        (click)="changePage(page+1)"
      >
        Next
      </button>
    </div>
  </div>
</div>
